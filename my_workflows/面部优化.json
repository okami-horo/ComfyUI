{"last_node_id":19,"last_link_id":18,"nodes":[{"id":7,"type":"CLIPTextEncode","pos":{"0":413,"1":389},"size":{"0":425.27801513671875,"1":180.6060791015625},"flags":{},"order":9,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":5,"label":"CLIP"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[6],"slot_index":0,"label":"条件"}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["text, watermark",true]},{"id":6,"type":"CLIPTextEncode","pos":{"0":415,"1":186},"size":{"0":422.84503173828125,"1":164.31304931640625},"flags":{},"order":8,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":3,"label":"CLIP"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[4],"slot_index":0,"label":"条件"}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["beautiful scenery nature glass bottle landscape, , purple galaxy bottle,",true]},{"id":5,"type":"EmptyLatentImage","pos":{"0":473,"1":609},"size":{"0":315,"1":106},"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[{"name":"LATENT","type":"LATENT","links":[2],"slot_index":0,"label":"Latent"}],"properties":{"Node name for S&R":"EmptyLatentImage"},"widgets_values":[512,512,1]},{"id":3,"type":"KSampler","pos":{"0":863,"1":186},"size":{"0":315,"1":262},"flags":{},"order":11,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":1,"label":"模型"},{"name":"positive","type":"CONDITIONING","link":4,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":6,"label":"负面条件"},{"name":"latent_image","type":"LATENT","link":2,"label":"Latent"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[7],"slot_index":0,"label":"Latent"}],"properties":{"Node name for S&R":"KSampler"},"widgets_values":[156680208700286,"randomize",20,8,"euler","normal",1]},{"id":8,"type":"VAEDecode","pos":{"0":1209,"1":188},"size":{"0":210,"1":46},"flags":{},"order":13,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":7,"label":"Latent"},{"name":"vae","type":"VAE","link":8,"label":"VAE"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[9],"slot_index":0,"label":"图像"}],"properties":{"Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":9,"type":"SaveImage","pos":{"0":1451,"1":189},"size":{"0":210,"1":58},"flags":{},"order":14,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":9,"label":"图像"}],"outputs":[],"properties":{"Node name for S&R":"SaveImage"},"widgets_values":["ComfyUI"]},{"id":4,"type":"CheckpointLoaderSimple","pos":{"0":26,"1":474},"size":{"0":315,"1":98},"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[{"name":"MODEL","type":"MODEL","links":[1],"slot_index":0,"label":"模型"},{"name":"CLIP","type":"CLIP","links":[3,5],"slot_index":1,"label":"CLIP"},{"name":"VAE","type":"VAE","links":[8],"slot_index":2,"label":"VAE"}],"properties":{"Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["v1-5-pruned-emaonly.ckpt"]},{"id":10,"type":"LoadImage","pos":{"0":-416,"1":-1553},"size":[315,314],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[10],"label":"图像","slot_index":0},{"name":"MASK","type":"MASK","links":null,"label":"遮罩"}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["ComfyInput_20241104_122804.png","image"]},{"id":12,"type":"CheckpointLoaderSimple","pos":{"0":-421,"1":-1138},"size":{"0":315,"1":98},"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[{"name":"MODEL","type":"MODEL","links":[11],"label":"模型","slot_index":0},{"name":"CLIP","type":"CLIP","links":[12],"label":"CLIP","slot_index":1},{"name":"VAE","type":"VAE","links":[13],"label":"VAE","slot_index":2}],"properties":{"Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["henmixReal_v5c.safetensors"]},{"id":17,"type":"UltralyticsDetectorProvider","pos":{"0":-418,"1":-1731},"size":{"0":315,"1":78},"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[{"name":"BBOX_DETECTOR","type":"BBOX_DETECTOR","links":[16],"label":"BBox检测","slot_index":0},{"name":"SEGM_DETECTOR","type":"SEGM_DETECTOR","links":null,"label":"SEGM检测"}],"properties":{"Node name for S&R":"UltralyticsDetectorProvider"},"widgets_values":["bbox/face_yolov8m.pt"]},{"id":18,"type":"SAMLoader","pos":{"0":-413,"1":-1882},"size":{"0":315,"1":82},"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[{"name":"SAM_MODEL","type":"SAM_MODEL","links":[17],"label":"SAM模型","slot_index":0}],"properties":{"Node name for S&R":"SAMLoader"},"widgets_values":["sam_vit_h_4b8939.pth","AUTO"]},{"id":14,"type":"CLIPTextEncode","pos":{"0":-473,"1":-973},"size":{"0":400,"1":200},"flags":{},"order":6,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":null,"label":"CLIP"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[14],"label":"条件","slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["Profound facial features,Clean neck，Delicate skin, clear facial features, smooth facial contour",true]},{"id":15,"type":"CLIPTextEncode","pos":{"0":-475,"1":-716},"size":{"0":400,"1":200},"flags":{},"order":7,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":null,"label":"CLIP"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[15],"label":"条件","slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["ugly",true]},{"id":11,"type":"FaceDetailer","pos":{"0":227,"1":-1559},"size":{"0":519,"1":900},"flags":{},"order":10,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":10,"label":"图像"},{"name":"model","type":"MODEL","link":11,"label":"模型"},{"name":"clip","type":"CLIP","link":12,"label":"CLIP"},{"name":"vae","type":"VAE","link":13,"label":"VAE"},{"name":"positive","type":"CONDITIONING","link":14,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":15,"label":"负面条件"},{"name":"bbox_detector","type":"BBOX_DETECTOR","link":16,"label":"BBox检测"},{"name":"sam_model_opt","type":"SAM_MODEL","link":17,"shape":7,"label":"SAM模型"},{"name":"segm_detector_opt","type":"SEGM_DETECTOR","link":null,"shape":7,"label":"Segm检测"},{"name":"detailer_hook","type":"DETAILER_HOOK","link":null,"shape":7,"label":"细化约束"},{"name":"scheduler_func_opt","type":"SCHEDULER_FUNC","link":null,"shape":7}],"outputs":[{"name":"image","type":"IMAGE","links":[18],"label":"图像","slot_index":0},{"name":"cropped_refined","type":"IMAGE","links":null,"shape":6,"label":"细化图像"},{"name":"cropped_enhanced_alpha","type":"IMAGE","links":null,"shape":6,"label":"细化部分"},{"name":"mask","type":"MASK","links":null,"label":"遮罩"},{"name":"detailer_pipe","type":"DETAILER_PIPE","links":null,"label":"细化节点束"},{"name":"cnet_images","type":"IMAGE","links":null,"shape":6,"label":"ControlNet图像"}],"properties":{"Node name for S&R":"FaceDetailer"},"widgets_values":[512,true,1024,0,"randomize",20,8,"euler","normal",0.5,5,true,true,0.5,10,3,"center-1",0,0.93,0,0.7,"False",10,"",1,false,20,true]},{"id":19,"type":"PreviewImage","pos":{"0":968,"1":-1572},"size":{"0":210,"1":26},"flags":{},"order":12,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":18,"label":"图像"}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"}}],"links":[[1,4,0,3,0,"MODEL"],[2,5,0,3,3,"LATENT"],[3,4,1,6,0,"CLIP"],[4,6,0,3,1,"CONDITIONING"],[5,4,1,7,0,"CLIP"],[6,7,0,3,2,"CONDITIONING"],[7,3,0,8,0,"LATENT"],[8,4,2,8,1,"VAE"],[9,8,0,9,0,"IMAGE"],[10,10,0,11,0,"IMAGE"],[11,12,0,11,1,"MODEL"],[12,12,1,11,2,"CLIP"],[13,12,2,11,3,"VAE"],[14,14,0,11,4,"CONDITIONING"],[15,15,0,11,5,"CONDITIONING"],[16,17,0,11,6,"BBOX_DETECTOR"],[17,18,0,11,7,"SAM_MODEL"],[18,11,0,19,0,"IMAGE"]],"groups":[],"config":{},"extra":{"workspace_info":{"id":"simOyHUArP3XlLkzC98mk"},"ds":{"scale":0.5559917313492264,"offset":[1248.0091274130255,1759.4051300374003]}},"version":0.4}